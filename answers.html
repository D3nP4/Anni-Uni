<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Show Answers</title>
    <style>
      :root {
        color-scheme: light;
        --bg: #f6f1e9;
        --ink: #1f1a17;
        --muted: #5c524d;
        --accent: #d46a4f;
        --accent-dark: #b4533a;
        --card: #fff7ef;
        --shadow: rgba(26, 19, 15, 0.14);
        --ring: rgba(212, 106, 79, 0.35);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
        color: var(--ink);
        background: radial-gradient(circle at top left, #fff2dd 0%, var(--bg) 55%, #efe6d8 100%);
        min-height: 100vh;
      }

      .page {
        max-width: 980px;
        margin: 0 auto;
        padding: 48px 20px 72px;
      }

      .hero {
        display: grid;
        gap: 16px;
        margin-bottom: 28px;
      }

      .hero h1 {
        font-size: clamp(2.2rem, 4vw, 3.4rem);
        margin: 0;
        letter-spacing: 0.02em;
      }

      .hero p {
        margin: 0;
        color: var(--muted);
        font-size: 1.1rem;
      }

      .panel {
        background: var(--card);
        border-radius: 22px;
        box-shadow: 0 18px 40px -26px var(--shadow);
        padding: 18px 22px;
        border: 1px solid rgba(31, 26, 23, 0.05);
        margin-bottom: 22px;
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        align-items: center;
      }

      a {
        color: var(--accent-dark);
        font-weight: 600;
        text-decoration: none;
      }

      .answers {
        display: grid;
        gap: 18px;
      }

      @media (min-width: 920px) {
        .answers {
          grid-template-columns: 1fr 1fr;
          align-items: start;
        }
      }

      .question-block {
        padding: 16px 18px;
        border-radius: 20px;
        background: #fff6ea;
        border: 1px solid rgba(31, 26, 23, 0.08);
        box-shadow: 0 16px 30px -24px var(--shadow);
        display: grid;
        gap: 14px;
      }

      .question-block h2 {
        margin: 0;
        font-size: 1.15rem;
      }

      .answer-line {
        margin: 0;
        color: var(--muted);
        line-height: 1.5;
        padding: 6px 0;
        border-bottom: 1px dashed rgba(31, 26, 23, 0.08);
      }

      .answer-line:last-of-type {
        border-bottom: none;
      }

      .answer-card {
        padding: 20px 22px;
        border-radius: 18px;
        background: #fffdf8;
        border: 1px solid rgba(31, 26, 23, 0.08);
        box-shadow: 0 16px 30px -24px var(--shadow);
        position: relative;
        animation: fadeUp 0.5s ease both;
      }

      .answer-card h3 {
        margin: 0 0 8px;
        font-size: 1.2rem;
      }

      .answer-card p {
        margin: 0;
        color: var(--muted);
        line-height: 1.5;
      }

      .answer-card::after {
        content: "";
        position: absolute;
        inset: 12px 12px auto auto;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--accent);
        opacity: 0.5;
      }

      .empty {
        text-align: center;
        color: var(--muted);
        padding: 18px;
        border: 1px dashed rgba(31, 26, 23, 0.2);
        border-radius: 16px;
      }

      @keyframes fadeUp {
        from {
          opacity: 0;
          transform: translateY(12px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @media (max-width: 680px) {
        .page {
          padding: 32px 16px 60px;
        }
      }
    </style>
  </head>
  <body>
    <main class="page">
      <section class="hero">
        <h1>Show answers</h1>
        <p>All saved questions and answers grouped by question.</p>
      </section>

      <section class="panel">
        <span>Go to:</span>
        <a href="index.html">Enter answers</a>
        <a href="presentation.html" style="margin-left: 12px;">Presentation view</a>
      </section>

      <section class="answers" id="answers">
        <div class="empty" id="empty-state">No answers saved yet.</div>
      </section>
    </main>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import {
        getFirestore,
        collection,
        query,
        orderBy,
        onSnapshot
      } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCSNDvrvuwDketbB-AlfFoJQysooJdq6JY",
        authDomain: "anni-uni.firebaseapp.com",
        projectId: "anni-uni",
        storageBucket: "anni-uni.firebasestorage.app",
        messagingSenderId: "32747088221",
        appId: "1:32747088221:web:5f239767a260925083a0b4"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);
      const entriesRef = collection(db, "entries");
      const QUESTIONS = [
        "What small habit makes your daily life better, even if it seems strange from the outside?",
        "What skill did you teach yourself that you’re secretly proud of?",
        "Which place in your home has the best story behind it?",
        "What’s something you often think about but rarely say out loud?",
        "If your day had a sound, what would it be today?",
        "Which completely useless superpower would you love to have?",
        "Which attribute would you refuse to level up in a video game on principle?",
        "If you had a personal mascot, what would it look like?",
        "What object describes you better than words could?",
        "If your personality were a building, which one would it be and why?",
        "Which color feels like “home” to you right now?",
        "What smell immediately brings back memories for you?",
        "Which small decision in your life ended up having a surprisingly big impact?",
        "What would you love to learn again as if discovering it for the first time?",
        "Which vision of the future gives you the most hope right now?",
        "What is a dream project you hope to accomplish someday?",
        "What kind of chaos motivates you, and what kind blocks you?",
        "What kind of feedback style (direct, humorous, visual, etc.) works best for you?",
        "What type of task makes you completely lose track of time?",
        "What instantly makes a group feel likeable to you?",
        "What item you use daily has a design you particularly appreciate?",
        "Which type of landscape inspires you the most, and why?",
        "If you could redesign a city, what is the first thing you would change?",
        "Which everyday object do you think deserves more attention?"
      ];

      const answers = document.getElementById("answers");
      const emptyState = document.getElementById("empty-state");

      function addAnswerLine(target, answer) {
        const line = document.createElement("p");
        line.className = "answer-line";
        line.textContent = answer;
        target.appendChild(line);
      }

      function renderEntries(entries) {
        answers.innerHTML = "";
        if (entries.length === 0) {
          emptyState.style.display = "block";
          answers.appendChild(emptyState);
          return;
        }

        emptyState.style.display = "none";
        const byQuestion = new Map();
        entries.forEach((entry) => {
          if (!byQuestion.has(entry.question)) {
            byQuestion.set(entry.question, []);
          }
          byQuestion.get(entry.question).push(entry);
        });

        QUESTIONS.forEach((question) => {
          const block = document.createElement("section");
          block.className = "question-block";

          const header = document.createElement("h2");
          header.textContent = question;
          block.appendChild(header);

          const answersForQuestion = byQuestion.get(question) || [];
          if (answersForQuestion.length === 0) {
            const empty = document.createElement("p");
            empty.className = "answer-line";
            empty.style.fontStyle = "italic";
            empty.textContent = "No answers yet.";
            block.appendChild(empty);
          } else {
            answersForQuestion.forEach((entry) => addAnswerLine(block, entry.answer));
          }

          answers.appendChild(block);
        });
      }

      onSnapshot(query(entriesRef, orderBy("createdAt", "asc")), (snapshot) => {
        const entries = snapshot.docs.map((docSnap) => docSnap.data());
        renderEntries(entries);
      });
    </script>
  </body>
</html>
